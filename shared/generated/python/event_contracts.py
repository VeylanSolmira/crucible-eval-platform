"""
Generated from event-contracts.yaml
DO NOT EDIT THIS FILE DIRECTLY - Edit the source YAML instead

Generated by: shared/scripts/generate-python-types.py
Source: shared/types/event-contracts.yaml
"""

from datetime import datetime
from typing import Optional, Dict, Any, List
from pydantic import BaseModel, Field


class EvaluationQueuedEvent(BaseModel):
    eval_id: str = Field(...)
    code: str = Field(...)
    language: Optional[str] = Field("python", description="Programming language (currently only python supported)")
    metadata: Optional[Dict[str, Any]] = Field(None, description="Additional metadata for the evaluation")


class EvaluationRunningEvent(BaseModel):
    eval_id: str = Field(...)
    executor_id: str = Field(...)
    container_id: str = Field(...)
    timeout: Optional[int] = Field(30, description="Execution timeout in seconds")


class EvaluationCompletedEvent(BaseModel):
    eval_id: str = Field(...)
    status: str = Field(...)
    output: Optional[str] = Field(None, description="Standard output from the evaluation")
    error: Optional[str] = Field(None, description="Standard error from the evaluation")
    exit_code: int = Field(...)
    executor_id: str = Field(...)
    completed_at: datetime = Field(...)


class EvaluationFailedEvent(BaseModel):
    eval_id: str = Field(...)
    error: str = Field(...)
    executor_id: Optional[str] = Field(None, description="ID of executor if failure occurred during execution")


class EvaluationEvent(BaseModel):
    """Generic event in evaluation lifecycle"""
    id: Optional[int] = Field(None, description="Event ID (if stored in database)")
    evaluation_id: str = Field(...)
    timestamp: datetime = Field(...)
    event_type: str = Field(...)
    message: str = Field(...)
    metadata: Optional[Dict[str, Any]] = Field(None, description="Additional event-specific data")


class EventChannels:
    """Redis pub/sub channel names for events."""
    EVALUATION_QUEUED = "evaluation:queued"
    EVALUATION_RUNNING = "evaluation:running"
    EVALUATION_COMPLETED = "evaluation:completed"
    EVALUATION_FAILED = "evaluation:failed"

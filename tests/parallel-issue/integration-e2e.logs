python tests/test_orchestrator.py integration e2e --parallel --verbose --show-cluster-resources
☁️  Detected remote cluster: arn:aws:eks:us-west-2:503132503803:cluster/crucible-platform
🌐 Remote cluster detected - enabling registry mode
📦 Using ECR registry: 503132503803.dkr.ecr.us-west-2.amazonaws.com
📋 Image Pull Policy: IfNotPresent

================================================================================
KUBERNETES TEST ORCHESTRATOR
================================================================================

Configuration:
  Namespace: dev
  Registry: 503132503803.dkr.ecr.us-west-2.amazonaws.com (ECR)
  Test Image: 503132503803.dkr.ecr.us-west-2.amazonaws.com/test-runner:20250802-214153
  Test Suites: ['integration', 'e2e']
  Parallel: True
  Include Slow: False
  Include Destructive: False

================================================================================
STEP 1: Running Smoke Tests
================================================================================
Kubernetes Cluster Access Smoke Tests
============================================================

✓ All prerequisites found

Running smoke tests...
------------------------------------------------------------
============================================================= test session starts =============================================================
collected 10 items

tests/smoke/test_cluster_access.py::TestClusterAccess::test_kubectl_connectivity PASSED                                                 [ 10%]
tests/smoke/test_cluster_access.py::TestClusterAccess::test_namespace_exists PASSED                                                     [ 20%]
tests/smoke/test_cluster_access.py::TestClusterAccess::test_required_services PASSED                                                    [ 30%]
tests/smoke/test_cluster_access.py::TestClusterAccess::test_simple_job_execution PASSED                                                 [ 40%]
tests/smoke/test_cluster_access.py::TestClusterAccess::test_api_accessible PASSED                                                       [ 50%]
tests/smoke/test_cluster_access.py::TestClusterAccess::test_deployments_ready PASSED                                                    [ 60%]
tests/smoke/test_cluster_access.py::TestClusterAccess::test_test_runner_image_accessible PASSED                                         [ 70%]
tests/smoke/test_cluster_access.py::test_resource_counts[pods-5] PASSED                                                                 [ 80%]
tests/smoke/test_cluster_access.py::test_resource_counts[services-7] PASSED                                                             [ 90%]
tests/smoke/test_cluster_access.py::test_resource_counts[configmaps-2] PASSED                                                           [100%]

TEST_RESULTS_JSON:{"passed": 10, "failed": 0, "skipped": 0}


============================================================= 10 passed in 18.81s =============================================================

============================================================
✅ SMOKE TESTS PASSED

Cluster is ready for main test suite!

Next steps:
1. Run full test suite inside cluster: python tests/run_tests.py
2. Or run specific test suites: python tests/run_tests.py integration

✅ Smoke tests passed. Cluster is ready.

================================================================================
STEP 2: Building Test Runner Image
================================================================================

🔨 Building image: 503132503803.dkr.ecr.us-west-2.amazonaws.com/test-runner:20250802-214153
🏗️  Building for linux/amd64 platform (EKS compatibility)
[+] Building 11.2s (17/17) FINISHED                                                                                       docker:desktop-linux
 => [internal] load build definition from Dockerfile                                                                                      0.0s
 => => transferring dockerfile: 1.62kB                                                                                                    0.0s
 => [internal] load metadata for docker.io/library/python:3.11-slim                                                                       3.3s
 => [auth] library/python:pull token for registry-1.docker.io                                                                             0.0s
 => [internal] load .dockerignore                                                                                                         0.0s
 => => transferring context: 808B                                                                                                         0.0s
 => [ 1/11] FROM docker.io/library/python:3.11-slim@sha256:0ce77749ac83174a31d5e107ce0cfa6b28a2fd6b0615e029d9d84b39c48976ee               0.0s
 => => resolve docker.io/library/python:3.11-slim@sha256:0ce77749ac83174a31d5e107ce0cfa6b28a2fd6b0615e029d9d84b39c48976ee                 0.0s
 => [internal] load build context                                                                                                         2.6s
 => => transferring context: 164.50kB                                                                                                     2.6s
 => CACHED [ 2/11] RUN apt-get update && apt-get install -y --no-install-recommends     gcc     g++     curl     netcat-traditional       0.0s
 => CACHED [ 3/11] RUN curl -LO "https://dl.k8s.io/release/v1.28.0/bin/linux/amd64/kubectl" &&     chmod +x kubectl &&     mv kubectl /u  0.0s
 => CACHED [ 4/11] RUN useradd -m -u 1000 testrunner                                                                                      0.0s
 => CACHED [ 5/11] WORKDIR /app                                                                                                           0.0s
 => CACHED [ 6/11] COPY tests/requirements.txt ./tests/                                                                                   0.0s
 => CACHED [ 7/11] COPY shared/requirements/ ./shared/requirements/                                                                       0.0s
 => CACHED [ 8/11] COPY constraints.txt ./                                                                                                0.0s
 => CACHED [ 9/11] RUN pip install --no-cache-dir --upgrade pip &&     pip install --no-cache-dir -r tests/requirements.txt               0.0s
 => [10/11] COPY . .                                                                                                                      0.8s
 => [11/11] RUN chown -R testrunner:testrunner /app                                                                                       2.7s
 => exporting to image                                                                                                                    1.2s
 => => exporting layers                                                                                                                   0.9s
 => => exporting manifest sha256:19ed83062dac1c5f27820a90f8e0f8f5f45025620d06d495ee89f3dafff14e37                                         0.0s
 => => exporting config sha256:913e7d7de427cfb28d55276afc86e7dac7edfcdf23b39da6748e10b43230bcd1                                           0.0s
 => => exporting attestation manifest sha256:ee2e6cd85645b0f655c484ab79b835ef4afa96f46dcc6f44fe8849921c6c1789                             0.0s
 => => exporting manifest list sha256:79dc042c83a299d94f05750ecb34737892cb429acc44e504ab852fd93f45deb2                                    0.0s
 => => naming to 503132503803.dkr.ecr.us-west-2.amazonaws.com/test-runner:20250802-214153                                                 0.0s
 => => naming to 503132503803.dkr.ecr.us-west-2.amazonaws.com/test-runner:latest                                                          0.0s

What's next:
    View a summary of image vulnerabilities and recommendations → docker scout quickview

🔐 Logging in to ECR...
✅ Successfully logged in to ECR

📤 Pushing images to registry (503132503803.dkr.ecr.us-west-2.amazonaws.com)...
⏳ This may take several minutes depending on your upload speed...
📊 Image size: 202MB

📤 [1/2] Pushing 503132503803.dkr.ecr.us-west-2.amazonaws.com/test-runner:20250802-214153
   Watch progress in the output below...
The push refers to repository [503132503803.dkr.ecr.us-west-2.amazonaws.com/test-runner]
6dbf6d4ad1bb: Pushed
4085babbc570: Layer already exists
2145dd73ae96: Layer already exists
543e0946455c: Layer already exists
7b05675d0ac8: Layer already exists
044d35e10242: Pushed
dab9a763e959: Layer already exists
ace8dd0e78a6: Layer already exists
c6b493fb6504: Layer already exists
33e069cc3d3d: Pushed
59e22667830b: Layer already exists
abd846fa1cdb: Layer already exists
9ceb718ecfff: Layer already exists
b7b61708209a: Layer already exists
983a1ca3f907: Layer already exists
20250802-214153: digest: sha256:79dc042c83a299d94f05750ecb34737892cb429acc44e504ab852fd93f45deb2 size: 856
✅ Successfully pushed 503132503803.dkr.ecr.us-west-2.amazonaws.com/test-runner:20250802-214153

📤 [2/2] Pushing 503132503803.dkr.ecr.us-west-2.amazonaws.com/test-runner:latest
   This should be faster (same layers)...
The push refers to repository [503132503803.dkr.ecr.us-west-2.amazonaws.com/test-runner]
983a1ca3f907: Layer already exists
9ceb718ecfff: Layer already exists
dab9a763e959: Layer already exists
c6b493fb6504: Layer already exists
6dbf6d4ad1bb: Layer already exists
7b05675d0ac8: Layer already exists
b7b61708209a: Layer already exists
4085babbc570: Layer already exists
ace8dd0e78a6: Layer already exists
2145dd73ae96: Layer already exists
abd846fa1cdb: Layer already exists
543e0946455c: Layer already exists
33e069cc3d3d: Layer already exists
044d35e10242: Already exists
59e22667830b: Layer already exists
latest: digest: sha256:79dc042c83a299d94f05750ecb34737892cb429acc44e504ab852fd93f45deb2 size: 856
✅ Successfully pushed 503132503803.dkr.ecr.us-west-2.amazonaws.com/test-runner:latest
✅ Test image ready

🔍 Debug - Registry value: '503132503803.dkr.ecr.us-west-2.amazonaws.com'
🔍 Debug - 'ecr' in registry: True
🔍 Debug - imagePullSecrets: []

================================================================================
STEP 3: Submitting Test Coordinator Job
================================================================================

🔐 Setting up coordinator permissions...

🚀 Submitting coordinator job: test-coordinator-20250802-214153
✅ Coordinator job submitted

================================================================================
STEP 4: Monitoring Test Execution
================================================================================

⏳ Waiting for coordinator pod to start...
   Checking pod status every 2 seconds...

   [0s] Container waiting: ContainerCreating
   💡 Container is being created - this is normal

   [0s] Pod phase: Pending
.
   [3s] Pod phase: Running

✅ Pod started after 3 seconds


📋 Coordinator Logs:
--------------------------------------------------------------------------------
================================================================================
TEST COORDINATOR
================================================================================

Running inside cluster in namespace: dev
Test image: 503132503803.dkr.ecr.us-west-2.amazonaws.com/test-runner:20250802-214153

📦 Discovering test suites...
  ✓ integration: 10 test files found
  ✓ e2e: 10 test files found

Found 2 test suites to run

🔍 Starting cluster resource monitoring (every 5 seconds)...

🚀 Running tests in PARALLEL mode

📤 Submitting parallel-safe test jobs...
  ✓ Submitted: integration-tests-20250802-214153-00
  ✓ Submitted: e2e-tests-20250802-214153-01

📊 Monitoring 2 jobs in parallel...

📊 Monitoring: integration-tests-20250802-214153-00
  Verbose mode: Will show full output on failure

📊 Monitoring: e2e-tests-20250802-214153-01
  Verbose mode: Will show full output on failure

[04:42:47] CLUSTER: Pods 🟢 25/35 CPU 🟢 76.9% Mem 🟢 27.9% | Evals: R=0 P=0
  │ [integration] ============================= test session starts ==============================
  │ [integration] platform linux -- Python 3.11.13, pytest-8.4.1, pluggy-1.6.0 -- /usr/local/bin/python
  │ [integration] cachedir: .pytest_cache
  │ [integration] rootdir: /app
  │ [integration] configfile: pyproject.toml
  │ [integration] plugins: anyio-3.7.1, asyncio-0.26.0, cov-6.2.1, mock-3.14.1, timeout-2.4.0
  │ [integration] asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
  │ [e2e] ============================= test session starts ==============================
  │ [e2e] platform linux -- Python 3.11.13, pytest-8.4.1, pluggy-1.6.0 -- /usr/local/bin/python
  │ [e2e] cachedir: .pytest_cache
  │ [e2e] rootdir: /app
  │ [e2e] configfile: pyproject.toml
  │ [e2e] plugins: anyio-3.7.1, asyncio-0.26.0, cov-6.2.1, mock-3.14.1, timeout-2.4.0
  │ [e2e] asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
  │ [e2e] collecting ... collected 26 items / 4 deselected / 22 selected
  │ [e2e]
  │ [e2e] tests/e2e/test_core_flows.py::test_health_check PASSED
  │ [integration] INFO:storage.core.flexible_manager:Using file storage as primary
  │ [integration] collecting ... Caching enabled
  │ [integration] INFO:storage_service.app:Storage service initialized:
  │ [integration] INFO:storage_service.app:  Primary backend: file
  │ [integration] INFO:storage_service.app:  Database URL: not configured
  │ [integration] INFO:storage_service.app:  File storage: ./data
  │ [integration] INFO:storage_service.app:  Cache enabled: True
  │ [integration] INFO:storage_service.app:  Large file threshold: 10485760 bytes
  │ [integration] collected 30 items / 2 deselected / 28 selected
  │ [integration]
  │ [e2e] tests/e2e/test_core_flows.py::test_submit_evaluation
  │ [e2e] [EVAL_SUBMIT] eval_id=20250803_044252_62a93b70 timestamp=1754196172.0813344
  │ [e2e] PASSED
  │ [e2e] tests/e2e/test_core_flows.py::test_evaluation_lifecycle
  │ [e2e] [EVAL_SUBMIT] eval_id=20250803_044252_96afc8b6 timestamp=1754196172.3624914
  │ [e2e] Resource-based timeout: 30s (1 waves with 17 concurrent)
  │ [e2e]
  │ [e2e] === Adaptive Evaluation Wait ===
  │ [e2e] Total evaluations: 1
  │ [e2e] Timeout: 120s
  │ [e2e]   Resource status: 0 running, 0 pending evaluation pods
  │ [e2e]   [0.9s] 20250803_044252_96afc8b6: provisioning
  │ [integration] tests/integration/test_available_libraries.py::test_available_libraries
  │ [integration] [EVAL_SUBMIT] eval_id=20250803_044252_bc484e9c timestamp=1754196172.681582
  │ [integration] Resource-based timeout: 30s (1 waves with 16 concurrent)
  │ [integration]
  │ [integration] === Adaptive Evaluation Wait ===
  │ [integration] Total evaluations: 1
  │ [integration] Timeout: 120s
  │ [integration]   Resource status: 0 running, 0 pending evaluation pods
  │ [integration]   [1.1s] 20250803_044252_bc484e9c: queued

[04:42:55] CLUSTER: Pods 🟡 28/35 CPU 🔴 92.5% Mem 🟢 36.9% | Evals: R=0 P=3
  │ [e2e]   [3.1s] 20250803_044252_96afc8b6: provisioning
  │ [integration]   [3.3s] 20250803_044252_bc484e9c: provisioning
  │ [e2e]   [5.3s] 20250803_044252_96afc8b6: provisioning
  │ [integration]   [5.5s] 20250803_044252_bc484e9c: provisioning
  │ [e2e]   [7.4s] 20250803_044252_96afc8b6: provisioning
  │ [integration]   [7.6s] 20250803_044252_bc484e9c: provisioning
  │ [e2e]   [9.6s] 20250803_044252_96afc8b6: provisioning
  │ [integration]   [9.7s] 20250803_044252_bc484e9c: provisioning

╔══════════════════════════════════════════════════════════════════════════════╗
║                   CLUSTER RESOURCE MONITOR - 04:43:03 UTC                    ║
╠══════════════════════════════════════════════════════════════════════════════╣
║ Resource │ Used/Total │ Utilization │ Available │ Status               ║
╠──────────┼────────────┼─────────────┼───────────┼──────────────────────╣
║ Pods     │  28/35     │       80.0% │         7 │ 🟡 WARN               ║
║ CPU Req  │      1785m │       92.5% │      145m │ 🔴 CRITICAL           ║
║ Mem Req  │     2620Mi │       36.9% │    4474Mi │ 🟢 OK                 ║
╠──────────────────────────────────────────────────────────────────────────────╣
║ Evaluation Pods: Running= 0 Pending= 1 Completed=16 Failed= 5                ║
╠══════════════════════════════════════════════════════════════════════════════╣
║ NODE DETAILS:                                                                ║
╠──────────────────────────────────────────────────────────────────────────────╣
║ ip-10-0-51-9 (t3.large):                                                     ║
║   Pods: 28/35 (80.0%) [ 7 avail]                                             ║
║   CPU:  Req= 1785m (92.5%)                                                   ║
║   Mem:  Req=2620Mi (36.9%)                                                   ║
╚══════════════════════════════════════════════════════════════════════════════╝
  │ [e2e]   [11.8s] 20250803_044252_96afc8b6: completed
  │ [e2e]
  │ [e2e] [11.6s] Progress: 1 completed, 0 failed, 0 pending
  │ [e2e]
  │ [e2e] === Evaluation Summary ===
  │ [e2e] Duration: 12.3s
  │ [e2e] Completed: 1
  │ [e2e] Failed: 0
  │ [e2e] Incomplete: 0
  │ [integration]   [12.0s] 20250803_044252_bc484e9c: provisioning
  │ [e2e] PASSED
  │ [e2e] tests/e2e/test_core_flows.py::test_error_handling
  │ [e2e] [EVAL_SUBMIT] eval_id=20250803_044305_a0c1f138 timestamp=1754196185.4327354
  │ [e2e] Resource-based timeout: 30s (1 waves with 16 concurrent)
  │ [e2e]
  │ [e2e] === Adaptive Evaluation Wait ===
  │ [e2e] Total evaluations: 1
  │ [e2e] Timeout: 120s
  │ [e2e]   Resource status: 1 running, 1 pending evaluation pods
  │ [e2e]   [0.8s] 20250803_044305_a0c1f138: provisioning
  │ [integration]   [14.1s] 20250803_044252_bc484e9c: provisioning
  │ [e2e]   [3.0s] 20250803_044305_a0c1f138: provisioning
  │ [integration]   [16.4s] 20250803_044252_bc484e9c: provisioning
  │ [e2e]   [5.2s] 20250803_044305_a0c1f138: provisioning

[04:43:11] CLUSTER: Pods 🟡 28/35 CPU 🔴 92.5% Mem 🟢 36.9% | Evals: R=1 P=1
  │ [integration]   [18.6s] 20250803_044252_bc484e9c: provisioning
  │ [e2e]   [7.3s] 20250803_044305_a0c1f138: provisioning
  │ [integration]   [20.7s] 20250803_044252_bc484e9c: provisioning
  │ [e2e]   [9.5s] 20250803_044305_a0c1f138: provisioning
  │ [integration]   [22.8s] 20250803_044252_bc484e9c: provisioning
  │ [integration]   [25.0s] 20250803_044252_bc484e9c: completed
  │ [integration]
  │ [integration] [24.8s] Progress: 1 completed, 0 failed, 0 pending
  │ [e2e]   [11.7s] 20250803_044305_a0c1f138: provisioning

[04:43:18] CLUSTER: Pods 🟡 28/35 CPU 🔴 92.5% Mem 🟢 36.9% | Evals: R=1 P=0
  │ [integration]
  │ [integration] === Evaluation Summary ===
  │ [integration] Duration: 25.5s
  │ [integration] Completed: 1
  │ [integration] Failed: 0
  │ [integration] Incomplete: 0
  │ [integration]
  │ [integration] Available libraries: numpy, requests, torch, json, hashlib, datetime, os, sys
  │ [integration] Unavailable libraries: pandas, matplotlib, scipy, sklearn, tensorflow
  │ [integration] PASSED
  │ [integration] tests/integration/test_celery_connection.py::TestCeleryConnection::test_redis_connection PASSED
  │ [e2e]   [13.9s] 20250803_044305_a0c1f138: provisioning
  │ [integration] tests/integration/test_celery_connection.py::TestCeleryConnection::test_celery_broker_connection
  │ [integration] Found 1 active workers
  │ [integration] PASSED
  │ [integration] tests/integration/test_celery_connection.py::TestCeleryConnection::test_celery_configuration PASSED
  │ [integration] tests/integration/test_celery_tasks.py::TestCeleryTasks::test_health_check_task PASSED
  │ [integration] INFO:httpx:HTTP Request: POST http://storage-service.dev.svc.cluster.local:8082/evaluations "HTTP/1.1 200 OK"
  │ [integration] tests/integration/test_celery_tasks.py::TestCeleryTasks::test_evaluate_code_task PASSED
  │ [integration] INFO:httpx:HTTP Request: DELETE http://storage-service.dev.svc.cluster.local:8082/evaluations/test-direct-1754196199 "HTTP/1.1 200 OK"
  │ [integration] INFO:httpx:HTTP Request: POST http://storage-service.dev.svc.cluster.local:8082/evaluations "HTTP/1.1 200 OK"
  │ [integration] INFO:httpx:HTTP Request: POST http://storage-service.dev.svc.cluster.local:8082/evaluations "HTTP/1.1 200 OK"
  │ [integration] INFO:httpx:HTTP Request: POST http://storage-service.dev.svc.cluster.local:8082/evaluations "HTTP/1.1 200 OK"
  │ [e2e]   [16.2s] 20250803_044305_a0c1f138: failed
  │ [e2e]
  │ [e2e] [15.9s] Progress: 0 completed, 1 failed, 0 pending
  │ [e2e]
  │ [e2e] === Evaluation Summary ===
  │ [e2e] Duration: 16.7s
  │ [e2e] Completed: 0
  │ [e2e] Failed: 1
  │ [e2e] Incomplete: 0
  │ [e2e]
  │ [e2e] [EVAL_SUBMIT] eval_id=20250803_044322_03b080cd timestamp=1754196202.5386484
  │ [e2e] Resource-based timeout: 30s (1 waves with 14 concurrent)
  │ [e2e]
  │ [e2e] === Adaptive Evaluation Wait ===
  │ [e2e] Total evaluations: 1
  │ [e2e] Timeout: 120s
  │ [e2e]   Resource status: 0 running, 3 pending evaluation pods
  │ [e2e]   [0.7s] 20250803_044322_03b080cd: provisioning
  │ [integration] INFO:httpx:HTTP Request: DELETE http://storage-service.dev.svc.cluster.local:8082/evaluations/test-seq-0-1754196200 "HTTP/1.1 200 OK"
  │ [integration] INFO:httpx:HTTP Request: DELETE http://storage-service.dev.svc.cluster.local:8082/evaluations/test-seq-1-1754196200 "HTTP/1.1 200 OK"
  │ [integration] INFO:httpx:HTTP Request: DELETE http://storage-service.dev.svc.cluster.local:8082/evaluations/test-seq-2-1754196201 "HTTP/1.1 200 OK"
  │ [integration] tests/integration/test_celery_tasks.py::TestCeleryTasks::test_multiple_tasks_sequential PASSED
  │ [integration] INFO:httpx:HTTP Request: POST http://storage-service.dev.svc.cluster.local:8082/evaluations "HTTP/1.1 200 OK"
  │ [integration] INFO:httpx:HTTP Request: DELETE http://storage-service.dev.svc.cluster.local:8082/evaluations/test-state-1754196203 "HTTP/1.1 200 OK"
  │ [integration] tests/integration/test_celery_tasks.py::TestCeleryTasks::test_task_state_tracking PASSED
  │ [integration] INFO:integration.conftest:API health check passed
  │ [e2e]   [3.0s] 20250803_044322_03b080cd: provisioning

╔══════════════════════════════════════════════════════════════════════════════╗
║                   CLUSTER RESOURCE MONITOR - 04:43:26 UTC                    ║
╠══════════════════════════════════════════════════════════════════════════════╣
║ Resource │ Used/Total │ Utilization │ Available │ Status               ║
╠──────────┼────────────┼─────────────┼───────────┼──────────────────────╣
║ Pods     │  28/35     │       80.0% │         7 │ 🟡 WARN               ║
║ CPU Req  │      1785m │       92.5% │      145m │ 🔴 CRITICAL           ║
║ Mem Req  │     2620Mi │       36.9% │    4474Mi │ 🟢 OK                 ║
╠──────────────────────────────────────────────────────────────────────────────╣
║ Evaluation Pods: Running= 0 Pending= 6 Completed=16 Failed= 5                ║
╠══════════════════════════════════════════════════════════════════════════════╣
║ NODE DETAILS:                                                                ║
╠──────────────────────────────────────────────────────────────────────────────╣
║ ip-10-0-51-9 (t3.large):                                                     ║
║   Pods: 28/35 (80.0%) [ 7 avail]                                             ║
║   CPU:  Req= 1785m (92.5%)                                                   ║
║   Mem:  Req=2620Mi (36.9%)                                                   ║
╚══════════════════════════════════════════════════════════════════════════════╝
  │ [e2e]   [5.2s] 20250803_044322_03b080cd: provisioning
  │ [e2e]   [7.4s] 20250803_044322_03b080cd: provisioning
  │ [e2e]   [9.6s] 20250803_044322_03b080cd: provisioning

[04:43:33] CLUSTER: Pods 🟡 28/35 CPU 🔴 92.5% Mem 🟢 36.9% | Evals: R=0 P=5
  │ [e2e]   [12.0s] 20250803_044322_03b080cd: provisioning
  │ [e2e]   [14.1s] 20250803_044322_03b080cd: provisioning
  │ [e2e]   [16.2s] 20250803_044322_03b080cd: provisioning

[04:43:41] CLUSTER: Pods 🟢 27/35 CPU 🟡 87.3% Mem 🟢 35.1% | Evals: R=0 P=5
  │ [e2e]   [18.6s] 20250803_044322_03b080cd: provisioning
  │ [e2e]   [20.9s] 20250803_044322_03b080cd: provisioning
  │ [e2e]   [23.1s] 20250803_044322_03b080cd: provisioning
  │ [e2e]   [25.5s] 20250803_044322_03b080cd: provisioning

╔══════════════════════════════════════════════════════════════════════════════╗
║                   CLUSTER RESOURCE MONITOR - 04:43:49 UTC                    ║
╠══════════════════════════════════════════════════════════════════════════════╣
║ Resource │ Used/Total │ Utilization │ Available │ Status               ║
╠──────────┼────────────┼─────────────┼───────────┼──────────────────────╣
║ Pods     │  28/35     │       80.0% │         7 │ 🟡 WARN               ║
║ CPU Req  │      1785m │       92.5% │      145m │ 🔴 CRITICAL           ║
║ Mem Req  │     2620Mi │       36.9% │    4474Mi │ 🟢 OK                 ║
╠──────────────────────────────────────────────────────────────────────────────╣
║ Evaluation Pods: Running= 0 Pending= 5 Completed=16 Failed= 8                ║
╠══════════════════════════════════════════════════════════════════════════════╣
║ NODE DETAILS:                                                                ║
╠──────────────────────────────────────────────────────────────────────────────╣
║ ip-10-0-51-9 (t3.large):                                                     ║
║   Pods: 28/35 (80.0%) [ 7 avail]                                             ║
║   CPU:  Req= 1785m (92.5%)                                                   ║
║   Mem:  Req=2620Mi (36.9%)                                                   ║
╚══════════════════════════════════════════════════════════════════════════════╝
  │ [e2e]   [27.6s] 20250803_044322_03b080cd: provisioning
  │ [integration] tests/integration/test_docker_event_diagnostics.py::test_diagnose_container_lifecycle_timing
  │ [integration] === Container Lifecycle Timing Results ===
  │ [integration]
  │ [integration] Test: instant_error
  │ [integration]   Submission time: 0.221s
  │ [integration]   Total time: 7.460s
  │ [integration]   Execution time: 7.239s
  │ [integration]   Status: failed
  │ [integration]   Has logs: True (length: 110)
  │ [integration]
  │ [integration] Test: print_then_error
  │ [integration]   Submission time: 0.248s
  │ [integration]   Total time: 8.133s
  │ [integration]   Execution time: 7.885s
  │ [integration]   Status: failed
  │ [integration]   Has logs: True (length: 130)
  │ [integration]
  │ [integration] Test: sleep_then_error
  │ [integration]   Submission time: 0.168s
  │ [integration]   Total time: 6.120s
  │ [integration]   Execution time: 5.952s
  │ [integration]   Status: failed
  │ [integration]   Has logs: True (length: 122)
  │ [integration]
  │ [integration] Test: normal_completion
  │ [integration]   Submission time: 0.285s
  │ [integration]   Total time: 6.001s
  │ [integration]   Execution time: 5.717s
  │ [integration]   Status: completed
  │ [integration]   Has logs: True (length: 8)
  │ [integration] PASSED
  │ [integration] INFO:integration.conftest:API health check passed
  │ [e2e]   [30.0s] 20250803_044322_03b080cd: provisioning
  │ [e2e]   [32.1s] 20250803_044322_03b080cd: provisioning
  │ [e2e]
  │ [e2e] ⚠️  No progress in 31s
  │ [e2e]   Checking cluster resources...
  │ [e2e]   Resource status: 0 running, 4 pending evaluation pods
  │ [e2e]     Quota check: 5492MB used / 7168MB limit (1676MB available)
  │ [e2e]     Evaluation pods: 0 running, 4 pending
  │ [e2e]   → Cluster has available capacity - waiting for scheduling
  │ [e2e]
  │ [e2e]   === Detailed Resource Status ===
  │ [e2e]   ResourceQuota:
  │ [e2e]     Memory: 5492Mi / 7Gi
  │ [e2e]     CPU: 5100m / 8

[04:43:56] CLUSTER: Pods 🟢 27/35 CPU 🟡 87.3% Mem 🟢 35.1% | Evals: R=0 P=4
  │ [e2e]
  │ [e2e]   Evaluation Pods:
  │ [e2e]     Pending (4):
  │ [e2e]       - 20250803-044322-03b0-650f5950-97d7b
  │ [e2e]       - 20250803-044352-5504-296edd72-m8s6g
  │ [e2e]       - test-seq-2-175419620-508efee8-6jz68
  │ [e2e]       - test-state-175419620-6e185107-jk4sx
  │ [e2e]     Failed (8):
  │ [e2e]       - 20250803-043600-ee60-4963b48e-96hf2
  │ [e2e]       - 20250803-043610-f9cf-3b9ead78-r9zz8
  │ [e2e]       - 20250803-043617-a460-78eee5dd-8pjn4
  │ [e2e]       ... and 5 more
  │ [e2e]
  │ [e2e]   Evaluations without pods (1):
  │ [e2e]     - 20250803_044322_03b080cd
  │ [e2e]   === End Detailed Status ===
  │ [e2e]   [34.4s] 20250803_044322_03b080cd: provisioning
  │ [e2e]   [36.6s] 20250803_044322_03b080cd: provisioning
  │ [e2e]   [38.7s] 20250803_044322_03b080cd: provisioning
  │ [integration] tests/integration/test_docker_event_diagnostics.py::test_container_removal_timing
  │ [integration] === Container Lifecycle Progression ===
  │ [integration]   0.443s: status=running, output=False, error=False, runtime=Nonems
  │ [integration]   0.607s: status=provisioning, output=False, error=False, runtime=Nonems
  │ [integration]   0.784s: status=provisioning, output=False, error=False, runtime=Nonems
  │ [integration]   1.025s: status=provisioning, output=False, error=False, runtime=Nonems
  │ [integration]   1.303s: status=provisioning, output=False, error=False, runtime=Nonems
  │ [integration]   1.784s: status=provisioning, output=False, error=False, runtime=Nonems
  │ [integration]   2.416s: status=provisioning, output=False, error=False, runtime=Nonems
  │ [integration]   3.111s: status=provisioning, output=False, error=False, runtime=Nonems
  │ [integration]   4.177s: status=provisioning, output=False, error=False, runtime=Nonems
  │ [integration]   5.581s: status=provisioning, output=False, error=False, runtime=Nonems
  │ [integration]   7.590s: status=provisioning, output=False, error=False, runtime=Nonems
  │ [integration]   9.795s: status=failed, output=False, error=True, runtime=7972ms
  │ [integration] PASSED
  │ [integration] INFO:integration.conftest:API health check passed

[04:44:04] CLUSTER: Pods 🟡 28/35 CPU 🔴 92.5% Mem 🟢 36.9% | Evals: R=1 P=3  │ [e2e]   [40.9s] 20250803_044322_03b080cd: provisioning

  │ [e2e]   [43.0s] 20250803_044322_03b080cd: provisioning
  │ [e2e]
  │ [e2e] ⚠️  No progress in 42s
  │ [e2e]   Checking cluster resources...
  │ [e2e]   Resource status: 0 running, 3 pending evaluation pods
  │ [e2e]     Quota check: 5364MB used / 7168MB limit (1804MB available)
  │ [e2e]     Evaluation pods: 0 running, 3 pending
  │ [e2e]   → Cluster has available capacity - waiting for scheduling
  │ [e2e]
  │ [e2e]   === Detailed Resource Status ===
  │ [e2e]   ResourceQuota:
  │ [e2e]     Memory: 5364Mi / 7Gi
  │ [e2e]     CPU: 5 / 8
  │ [e2e]
  │ [e2e]   Evaluation Pods:
  │ [e2e]     Pending (3):
  │ [e2e]       - 20250803-044322-03b0-650f5950-97d7b
  │ [e2e]       - 20250803-044402-c938-f677c53a-ht2jv
  │ [e2e]       - test-state-175419620-6e185107-jk4sx
  │ [e2e]     Failed (9):
  │ [e2e]       - 20250803-043600-ee60-4963b48e-96hf2
  │ [e2e]       - 20250803-043610-f9cf-3b9ead78-r9zz8
  │ [e2e]       - 20250803-043617-a460-78eee5dd-8pjn4
  │ [e2e]       ... and 6 more
  │ [e2e]
  │ [e2e]   Evaluations without pods (1):
  │ [e2e]     - 20250803_044322_03b080cd
  │ [e2e]   === End Detailed Status ===
  │ [e2e]   [45.3s] 20250803_044322_03b080cd: provisioning
  │ [e2e]   [47.4s] 20250803_044322_03b080cd: provisioning
  │ [integration] tests/integration/test_evaluation_job_imports.py::TestEvaluationJobImports::test_standard_library_imports PASSED
  │ [integration] INFO:integration.conftest:API health check passed

╔══════════════════════════════════════════════════════════════════════════════╗
║                   CLUSTER RESOURCE MONITOR - 04:44:12 UTC                    ║
╠══════════════════════════════════════════════════════════════════════════════╣
║ Resource │ Used/Total │ Utilization │ Available │ Status               ║
╠──────────┼────────────┼─────────────┼───────────┼──────────────────────╣
║ Pods     │  27/35     │       77.1% │         8 │ 🟢 OK                 ║
║ CPU Req  │      1685m │       87.3% │      245m │ 🟡 WARN               ║
║ Mem Req  │     2492Mi │       35.1% │    4602Mi │ 🟢 OK                 ║
╠──────────────────────────────────────────────────────────────────────────────╣
║ Evaluation Pods: Running= 0 Pending= 3 Completed=18 Failed= 9                ║
╠══════════════════════════════════════════════════════════════════════════════╣
║ NODE DETAILS:                                                                ║
╠──────────────────────────────────────────────────────────────────────────────╣
║ ip-10-0-51-9 (t3.large):                                                     ║
║   Pods: 27/35 (77.1%) [ 8 avail]                                             ║
║   CPU:  Req= 1685m (87.3%)                                                   ║
║   Mem:  Req=2492Mi (35.1%)                                                   ║
╚══════════════════════════════════════════════════════════════════════════════╝
  │ [e2e]   [49.7s] 20250803_044322_03b080cd: provisioning
  │ [e2e]   [52.1s] 20250803_044322_03b080cd: provisioning
  │ [e2e]   [54.3s] 20250803_044322_03b080cd: provisioning
  │ [e2e]
  │ [e2e] ⚠️  No progress in 54s
  │ [e2e]   Checking cluster resources...
  │ [e2e]   Resource status: 1 running, 2 pending evaluation pods
  │ [e2e]     Quota check: 5364MB used / 7168MB limit (1804MB available)
  │ [e2e]     Evaluation pods: 1 running, 2 pending
  │ [e2e]   → Cluster has available capacity - waiting for scheduling
  │ [e2e]
  │ [e2e]   === Detailed Resource Status ===
  │ [e2e]   ResourceQuota:
  │ [e2e]     Memory: 5364Mi / 7Gi
  │ [e2e]     CPU: 5 / 8
  │ [e2e]
  │ [e2e]   Evaluation Pods:
  │ [e2e]     Running (1):
  │ [e2e]       - 20250803-044411-26b5-322c4159-rd67t
  │ [e2e]     Pending (2):
  │ [e2e]       - 20250803-044322-03b0-650f5950-97d7b
  │ [e2e]       - test-state-175419620-6e185107-jk4sx
  │ [e2e]     Failed (9):
  │ [e2e]       - 20250803-043600-ee60-4963b48e-96hf2
  │ [e2e]       - 20250803-043610-f9cf-3b9ead78-r9zz8
  │ [e2e]       - 20250803-043617-a460-78eee5dd-8pjn4
  │ [e2e]       ... and 6 more
  │ [e2e]
  │ [e2e]   Evaluations without pods (1):
  │ [e2e]     - 20250803_044322_03b080cd
  │ [e2e]   === End Detailed Status ===

[04:44:20] CLUSTER: Pods 🟡 28/35 CPU 🔴 92.5% Mem 🟢 36.9% | Evals: R=1 P=2
  │ [e2e]   [57.1s] 20250803_044322_03b080cd: provisioning
  │ [e2e]   [59.5s] 20250803_044322_03b080cd: provisioning
  │ [e2e]   [61.7s] 20250803_044322_03b080cd: provisioning
  │ [integration] tests/integration/test_evaluation_job_imports.py::TestEvaluationJobImports::test_import_error_captured PASSED
  │ [integration] INFO:integration.conftest:API health check passed
  │ [e2e]   [64.1s] 20250803_044322_03b080cd: provisioning

[04:44:28] CLUSTER: Pods 🟡 28/35 CPU 🔴 92.5% Mem 🟢 36.9% | Evals: R=0 P=3
  │ [e2e]   [66.2s] 20250803_044322_03b080cd: failed
  │ [e2e]
  │ [e2e] [66.1s] Progress: 0 completed, 1 failed, 0 pending
  │ [e2e]
  │ [e2e] === Evaluation Summary ===
  │ [e2e] Duration: 66.7s
  │ [e2e] Completed: 0
  │ [e2e] Failed: 1
  │ [e2e] Incomplete: 0
  │ [e2e] PASSED
  │ [e2e] tests/e2e/test_core_flows.py::test_storage_retrieval
  │ [e2e] [EVAL_SUBMIT] eval_id=20250803_044430_13e13278 timestamp=1754196270.1505203
  │ [e2e] Resource-based timeout: 30s (1 waves with 15 concurrent)
  │ [e2e]
  │ [e2e] === Adaptive Evaluation Wait ===
  │ [e2e] Total evaluations: 1
  │ [e2e] Timeout: 120s
  │ [e2e]   Resource status: 0 running, 1 pending evaluation pods
  │ [e2e]   [0.8s] 20250803_044430_13e13278: provisioning
  │ [e2e]   [3.0s] 20250803_044430_13e13278: provisioning
  │ [e2e]   [5.4s] 20250803_044430_13e13278: provisioning

╔══════════════════════════════════════════════════════════════════════════════╗
║                   CLUSTER RESOURCE MONITOR - 04:44:36 UTC                    ║
╠══════════════════════════════════════════════════════════════════════════════╣
║ Resource │ Used/Total │ Utilization │ Available │ Status               ║
╠──────────┼────────────┼─────────────┼───────────┼──────────────────────╣
║ Pods     │  28/35     │       80.0% │         7 │ 🟡 WARN               ║
║ CPU Req  │      1785m │       92.5% │      145m │ 🔴 CRITICAL           ║
║ Mem Req  │     2620Mi │       36.9% │    4474Mi │ 🟢 OK                 ║
╠──────────────────────────────────────────────────────────────────────────────╣
║ Evaluation Pods: Running= 1 Pending= 2 Completed=18 Failed= 9                ║
╠══════════════════════════════════════════════════════════════════════════════╣
║ NODE DETAILS:                                                                ║
╠──────────────────────────────────────────────────────────────────────────────╣
║ ip-10-0-51-9 (t3.large):                                                     ║
║   Pods: 28/35 (80.0%) [ 7 avail]                                             ║
║   CPU:  Req= 1785m (92.5%)                                                   ║
║   Mem:  Req=2620Mi (36.9%)                                                   ║
╚══════════════════════════════════════════════════════════════════════════════╝
  │ [e2e]   [7.8s] 20250803_044430_13e13278: provisioning
  │ [e2e]   [9.9s] 20250803_044430_13e13278: provisioning
  │ [e2e]   [12.3s] 20250803_044430_13e13278: provisioning
  │ [integration] tests/integration/test_evaluation_job_imports.py::TestEvaluationJobImports::test_ml_libraries_available PASSED
  │ [integration] INFO:integration.conftest:API health check passed

[04:44:44] CLUSTER: Pods 🟡 28/35 CPU 🔴 92.5% Mem 🟢 36.9% | Evals: R=1 P=2
  │ [e2e]   [14.5s] 20250803_044430_13e13278: failed
  │ [e2e]
  │ [e2e] [14.3s] Progress: 0 completed, 1 failed, 0 pending
  │ [e2e]
  │ [e2e] === Evaluation Summary ===
  │ [e2e] Duration: 15.0s
  │ [e2e] Completed: 0
  │ [e2e] Failed: 1
  │ [e2e] Incomplete: 0
  │ [e2e] FAILED
  │ [e2e] tests/e2e/test_core_flows.py::test_evaluation_timeout
  │ [e2e] [EVAL_SUBMIT] eval_id=20250803_044445_ea6cb54c timestamp=1754196285.4657083
  │ [e2e] Resource-based timeout: 30s (1 waves with 15 concurrent)
  │ [e2e]
  │ [e2e] === Adaptive Evaluation Wait ===
  │ [e2e] Total evaluations: 1
  │ [e2e] Timeout: 30s
  │ [e2e]   Resource status: 0 running, 2 pending evaluation pods
  │ [e2e]   [1.0s] 20250803_044445_ea6cb54c: provisioning
  │ [e2e]   [3.1s] 20250803_044445_ea6cb54c: provisioning
  │ [integration] tests/integration/test_evaluation_job_imports.py::TestEvaluationJobImports::test_sys_path_and_modules PASSED
  │ [integration] INFO:integration.conftest:API health check passed
  │ [e2e]   [5.5s] 20250803_044445_ea6cb54c: provisioning

[04:44:52] CLUSTER: Pods 🟡 28/35 CPU 🔴 92.5% Mem 🟢 36.9% | Evals: R=1 P=2
  │ [e2e]   [7.7s] 20250803_044445_ea6cb54c: failed
  │ [e2e]
  │ [e2e] [7.5s] Progress: 0 completed, 1 failed, 0 pending
  │ [e2e]
  │ [e2e] === Evaluation Summary ===
  │ [e2e] Duration: 8.2s
  │ [e2e] Completed: 0
  │ [e2e] Failed: 1
  │ [e2e] Incomplete: 0
  │ [e2e] PASSED
  │ [e2e] tests/e2e/test_core_flows.py::test_language_parameter
  │ [e2e] [EVAL_SUBMIT] eval_id=20250803_044454_bd3d22bc timestamp=1754196294.0787184
  │ [e2e] PASSED
  │ [e2e] tests/e2e/test_evaluation_lifecycle.py::test_evaluation_completes_and_status_updates Resource-based timeout: 30s (1 waves with 14 concurrent)
  │ [e2e]
  │ [e2e] === Adaptive Evaluation Wait ===
  │ [e2e] Total evaluations: 1
  │ [e2e] Timeout: 30s
  │ [e2e]   Resource status: 1 running, 3 pending evaluation pods
  │ [e2e]   [0.5s] 20250803_044454_fbc6081b: provisioning

[1/2] ❌ e2e: failed (130.5s)
  │ [integration] tests/integration/test_evaluation_job_imports.py::TestEvaluationJobImports::test_import_with_syntax_error PASSED
  │ [integration] INFO:integration.conftest:API health check passed

╔══════════════════════════════════════════════════════════════════════════════╗
║                   CLUSTER RESOURCE MONITOR - 04:44:59 UTC                    ║
╠══════════════════════════════════════════════════════════════════════════════╣
║ Resource │ Used/Total │ Utilization │ Available │ Status               ║
╠──────────┼────────────┼─────────────┼───────────┼──────────────────────╣
║ Pods     │  27/35     │       77.1% │         8 │ 🟢 OK                 ║
║ CPU Req  │      1685m │       87.3% │      245m │ 🟡 WARN               ║
║ Mem Req  │     2492Mi │       35.1% │    4602Mi │ 🟢 OK                 ║
╠──────────────────────────────────────────────────────────────────────────────╣
║ Evaluation Pods: Running= 0 Pending= 4 Completed=19 Failed=10                ║
╠══════════════════════════════════════════════════════════════════════════════╣
║ NODE DETAILS:                                                                ║
╠──────────────────────────────────────────────────────────────────────────────╣
║ ip-10-0-51-9 (t3.large):                                                     ║
║   Pods: 27/35 (77.1%) [ 8 avail]                                             ║
║   CPU:  Req= 1685m (87.3%)                                                   ║
║   Mem:  Req=2492Mi (35.1%)                                                   ║
╚══════════════════════════════════════════════════════════════════════════════╝

[04:45:07] CLUSTER: Pods 🟡 28/35 CPU 🔴 92.5% Mem 🟢 36.9% | Evals: R=0 P=3
  │ [integration] tests/integration/test_evaluation_job_imports.py::TestEvaluationJobImports::test_relative_imports PASSED
  │ [integration] INFO:integration.conftest:API health check passed

[04:45:15] CLUSTER: Pods 🟡 28/35 CPU 🔴 92.5% Mem 🟢 36.9% | Evals: R=0 P=2
  │ [integration] tests/integration/test_evaluation_job_imports.py::TestEvaluationJobImports::test_multiline_imports PASSED
  │ [integration] INFO:integration.conftest:API health check passed

[2/2] ❌ integration: failed (153.5s)

================================================================================
TEST SUMMARY
================================================================================

Test Suites:
  Succeeded: 0
  Failed: 2

Test Cases:
  Passed: 0
  Failed: 0
  Skipped: 0

❌ FAILED SUITES:
  - e2e-tests-20250802-214153-01:
    ============================= test session starts ==============================
platform linux -- Python 3.11.13, pytest-8.4.1, pluggy-1.6.0 -- /usr/local/bin/python
cachedir: .pytest_cache
rootdir: /app
configfile: pyproject.toml
plugins: anyio-3.7.1, asyncio-0.26.0, cov-6.2.1, mock-3.14.1, timeout-2.4.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 26 items / 4 deselected / 22 selected

tests/e2e/test_core_flows.py::test_health_check PASSED
tests/e2e/test_core_flows.py::test_submit_evaluation
[EVAL_SUBMIT] eval_id=20250803_044252_62a93b70 timestamp=1754196172.0813344
PASSED
tests/e2e/test_core_flows.py::test_evaluation_lifecycle
[EVAL_SUBMIT] eval_id=20250803_044252_96afc8b6 timestamp=1754196172.3624914
Resource-based timeout: 30s (1 waves with 17 concurrent)

=== Adaptive Evaluation Wait ===
Total evaluations: 1
Timeout: 120s
  Resource status: 0 running, 0 pending evaluation pods
  [0.9s] 20250803_044252_96afc8b6: provisioning
  [3.1s] 20250803_044252_96afc8b6: provisioning
  [5.3s] 20250803_044252_96afc8b6: provisioning
  [7.4s] 20250803_044252_96afc8b6: provisioning
  [9.6s] 20250803_044252_96afc8b6: provisioning
  [11.8s] 20250803_044252_96afc8b6: completed

[11.6s] Progress: 1 completed, 0 failed, 0 pending

=== Evaluation Summary ===
Duration: 12.3s
Completed: 1
Failed: 0
Incomplete: 0
PASSED
tests/e2e/test_core_flows.py::test_error_handling
[EVAL_SUBMIT] eval_id=20250803_044305_a0c1f138 timestamp=1754196185.4327354
Resource-based timeout: 30s (1 waves with 16 concurrent)

=== Adaptive Evaluation Wait ===
Total evaluations: 1
Timeout: 120s
  Resource status: 1 running, 1 pending evaluation pods
  [0.8s] 20250803_044305_a0c1f138: provisioning
  [3.0s] 20250803_044305_a0c1f138: provisioning
  [5.2s] 20250803_044305_a0c1f138: provisioning
  [7.3s] 20250803_044305_a0c1f138: provisioning
  [9.5s] 20250803_044305_a0c1f138: provisioning
  [11.7s] 20250803_044305_a0c1f138: provisioning
  [13.9s] 20250803_044305_a0c1f138: provisioning
  [16.2s] 20250803_044305_a0c1f138: failed

[15.9s] Progress: 0 completed, 1 failed, 0 pending

=== Evaluation Summary ===
Duration: 16.7s
Completed: 0
Failed: 1
Incomplete: 0

[EVAL_SUBMIT] eval_id=20250803_044322_03b080cd timestamp=1754196202.5386484
Resource-based timeout: 30s (1 waves with 14 concurrent)

=== Adaptive Evaluation Wait ===
Total evaluations: 1
Timeout: 120s
  Resource status: 0 running, 3 pending evaluation pods
  [0.7s] 20250803_044322_03b080cd: provisioning
  [3.0s] 20250803_044322_03b080cd: provisioning
  [5.2s] 20250803_044322_03b080cd: provisioning
  [7.4s] 20250803_044322_03b080cd: provisioning
  [9.6s] 20250803_044322_03b080cd: provisioning
  [12.0s] 20250803_044322_03b080cd: provisioning
  [14.1s] 20250803_044322_03b080cd: provisioning
  [16.2s] 20250803_044322_03b080cd: provisioning
  [18.6s] 20250803_044322_03b080cd: provisioning
  [20.9s] 20250803_044322_03b080cd: provisioning
  [23.1s] 20250803_044322_03b080cd: provisioning
  [25.5s] 20250803_044322_03b080cd: provisioning
  [27.6s] 20250803_044322_03b080cd: provisioning
  [30.0s] 20250803_044322_03b080cd: provisioning
  [32.1s] 20250803_044322_03b080cd: provisioning

⚠️  No progress in 31s
  Checking cluster resources...
  Resource status: 0 running, 4 pending evaluation pods
    Quota check: 5492MB used / 7168MB limit (1676MB available)
    Evaluation pods: 0 running, 4 pending
  → Cluster has available capacity - waiting for scheduling

  === Detailed Resource Status ===
  ResourceQuota:
    Memory: 5492Mi / 7Gi
    CPU: 5100m / 8

  Evaluation Pods:
    Pending (4):
      - 20250803-044322-03b0-650f5950-97d7b
      - 20250803-044352-5504-296edd72-m8s6g
      - test-seq-2-175419620-508efee8-6jz68
      - test-state-175419620-6e185107-jk4sx
    Failed (8):
      - 20250803-043600-ee60-4963b48e-96hf2
      - 20250803-043610-f9cf-3b9ead78-r9zz8
      - 20250803-043617-a460-78eee5dd-8pjn4
      ... and 5 more

  Evaluations without pods (1):
    - 20250803_044322_03b080cd
  === End Detailed Status ===
  [34.4s] 20250803_044322_03b080cd: provisioning
  [36.6s] 20250803_044322_03b080cd: provisioning
  [38.7s] 20250803_044322_03b080cd: provisioning
  [40.9s] 20250803_044322_03b080cd: provisioning
  [43.0s] 20250803_044322_03b080cd: provisioning

⚠️  No progress in 42s
  Checking cluster resources...
  Resource status: 0 running, 3 pending evaluation pods
    Quota check: 5364MB used / 7168MB limit (1804MB available)
    Evaluation pods: 0 running, 3 pending
  → Cluster has available capacity - waiting for scheduling

  === Detailed Resource Status ===
  ResourceQuota:
    Memory: 5364Mi / 7Gi
    CPU: 5 / 8

  Evaluation Pods:
    Pending (3):
      - 20250803-044322-03b0-650f5950-97d7b
      - 20250803-044402-c938-f677c53a-ht2jv
      - test-state-175419620-6e185107-jk4sx
    Failed (9):
      - 20250803-043600-ee60-4963b48e-96hf2
      - 20250803-043610-f9cf-3b9ead78-r9zz8
      - 20250803-043617-a460-78eee5dd-8pjn4
      ... and 6 more

  Evaluations without pods (1):
    - 20250803_044322_03b080cd
  === End Detailed Status ===
  [45.3s] 20250803_044322_03b080cd: provisioning
  [47.4s] 20250803_044322_03b080cd: provisioning
  [49.7s] 20250803_044322_03b080cd: provisioning
  [52.1s] 20250803_044322_03b080cd: provisioning
  [54.3s] 20250803_044322_03b080cd: provisioning

⚠️  No progress in 54s
  Checking cluster resources...
  Resource status: 1 running, 2 pending evaluation pods
    Quota check: 5364MB used / 7168MB limit (1804MB available)
    Evaluation pods: 1 running, 2 pending
  → Cluster has available capacity - waiting for scheduling

  === Detailed Resource Status ===
  ResourceQuota:
    Memory: 5364Mi / 7Gi
    CPU: 5 / 8

  Evaluation Pods:
    Running (1):
      - 20250803-044411-26b5-322c4159-rd67t
    Pending (2):
      - 20250803-044322-03b0-650f5950-97d7b
      - test-state-175419620-6e185107-jk4sx
    Failed (9):
      - 20250803-043600-ee60-4963b48e-96hf2
      - 20250803-043610-f9cf-3b9ead78-r9zz8
      - 20250803-043617-a460-78eee5dd-8pjn4
      ... and 6 more

  Evaluations without pods (1):
    - 20250803_044322_03b080cd
  === End Detailed Status ===
  [57.1s] 20250803_044322_03b080cd: provisioning
  [59.5s] 20250803_044322_03b080cd: provisioning
  [61.7s] 20250803_044322_03b080cd: provisioning
  [64.1s] 20250803_044322_03b080cd: provisioning
  [66.2s] 20250803_044322_03b080cd: failed

[66.1s] Progress: 0 completed, 1 failed, 0 pending

=== Evaluation Summary ===
Duration: 66.7s
Completed: 0
Failed: 1
Incomplete: 0
PASSED
tests/e2e/test_core_flows.py::test_storage_retrieval
[EVAL_SUBMIT] eval_id=20250803_044430_13e13278 timestamp=1754196270.1505203
Resource-based timeout: 30s (1 waves with 15 concurrent)

=== Adaptive Evaluation Wait ===
Total evaluations: 1
Timeout: 120s
  Resource status: 0 running, 1 pending evaluation pods
  [0.8s] 20250803_044430_13e13278: provisioning
  [3.0s] 20250803_044430_13e13278: provisioning
  [5.4s] 20250803_044430_13e13278: provisioning
  [7.8s] 20250803_044430_13e13278: provisioning
  [9.9s] 20250803_044430_13e13278: provisioning
  [12.3s] 20250803_044430_13e13278: provisioning
  [14.5s] 20250803_044430_13e13278: failed

[14.3s] Progress: 0 completed, 1 failed, 0 pending

=== Evaluation Summary ===
Duration: 15.0s
Completed: 0
Failed: 1
Incomplete: 0
FAILED
tests/e2e/test_core_flows.py::test_evaluation_timeout
[EVAL_SUBMIT] eval_id=20250803_044445_ea6cb54c timestamp=1754196285.4657083
Resource-based timeout: 30s (1 waves with 15 concurrent)

=== Adaptive Evaluation Wait ===
Total evaluations: 1
Timeout: 30s
  Resource status: 0 running, 2 pending evaluation pods
  [1.0s] 20250803_044445_ea6cb54c: provisioning
  [3.1s] 20250803_044445_ea6cb54c: provisioning
  [5.5s] 20250803_044445_ea6cb54c: provisioning
  [7.7s] 20250803_044445_ea6cb54c: failed

[7.5s] Progress: 0 completed, 1 failed, 0 pending

=== Evaluation Summary ===
Duration: 8.2s
Completed: 0
Failed: 1
Incomplete: 0
PASSED
tests/e2e/test_core_flows.py::test_language_parameter
[EVAL_SUBMIT] eval_id=20250803_044454_bd3d22bc timestamp=1754196294.0787184
PASSED
tests/e2e/test_evaluation_lifecycle.py::test_evaluation_completes_and_status_updates Resource-based timeout: 30s (1 waves with 14 concurrent)

=== Adaptive Evaluation Wait ===
Total evaluations: 1
Timeout: 30s
  Resource status: 1 running, 3 pending evaluation pods
  [0.5s] 20250803_044454_fbc6081b: provisioning
  - integration-tests-20250802-214153-00:
    ============================= test session starts ==============================
platform linux -- Python 3.11.13, pytest-8.4.1, pluggy-1.6.0 -- /usr/local/bin/python
cachedir: .pytest_cache
rootdir: /app
configfile: pyproject.toml
plugins: anyio-3.7.1, asyncio-0.26.0, cov-6.2.1, mock-3.14.1, timeout-2.4.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
INFO:storage.core.flexible_manager:Using file storage as primary
collecting ... Caching enabled
INFO:storage_service.app:Storage service initialized:
INFO:storage_service.app:  Primary backend: file
INFO:storage_service.app:  Database URL: not configured
INFO:storage_service.app:  File storage: ./data
INFO:storage_service.app:  Cache enabled: True
INFO:storage_service.app:  Large file threshold: 10485760 bytes
collected 30 items / 2 deselected / 28 selected

tests/integration/test_available_libraries.py::test_available_libraries
[EVAL_SUBMIT] eval_id=20250803_044252_bc484e9c timestamp=1754196172.681582
Resource-based timeout: 30s (1 waves with 16 concurrent)

=== Adaptive Evaluation Wait ===
Total evaluations: 1
Timeout: 120s
  Resource status: 0 running, 0 pending evaluation pods
  [1.1s] 20250803_044252_bc484e9c: queued
  [3.3s] 20250803_044252_bc484e9c: provisioning
  [5.5s] 20250803_044252_bc484e9c: provisioning
  [7.6s] 20250803_044252_bc484e9c: provisioning
  [9.7s] 20250803_044252_bc484e9c: provisioning
  [12.0s] 20250803_044252_bc484e9c: provisioning
  [14.1s] 20250803_044252_bc484e9c: provisioning
  [16.4s] 20250803_044252_bc484e9c: provisioning
  [18.6s] 20250803_044252_bc484e9c: provisioning
  [20.7s] 20250803_044252_bc484e9c: provisioning
  [22.8s] 20250803_044252_bc484e9c: provisioning
  [25.0s] 20250803_044252_bc484e9c: completed

[24.8s] Progress: 1 completed, 0 failed, 0 pending

=== Evaluation Summary ===
Duration: 25.5s
Completed: 1
Failed: 0
Incomplete: 0

Available libraries: numpy, requests, torch, json, hashlib, datetime, os, sys
Unavailable libraries: pandas, matplotlib, scipy, sklearn, tensorflow
PASSED
tests/integration/test_celery_connection.py::TestCeleryConnection::test_redis_connection PASSED
tests/integration/test_celery_connection.py::TestCeleryConnection::test_celery_broker_connection
Found 1 active workers
PASSED
tests/integration/test_celery_connection.py::TestCeleryConnection::test_celery_configuration PASSED
tests/integration/test_celery_tasks.py::TestCeleryTasks::test_health_check_task PASSED
INFO:httpx:HTTP Request: POST http://storage-service.dev.svc.cluster.local:8082/evaluations "HTTP/1.1 200 OK"
tests/integration/test_celery_tasks.py::TestCeleryTasks::test_evaluate_code_task PASSED
INFO:httpx:HTTP Request: DELETE http://storage-service.dev.svc.cluster.local:8082/evaluations/test-direct-1754196199 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://storage-service.dev.svc.cluster.local:8082/evaluations "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://storage-service.dev.svc.cluster.local:8082/evaluations "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://storage-service.dev.svc.cluster.local:8082/evaluations "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: DELETE http://storage-service.dev.svc.cluster.local:8082/evaluations/test-seq-0-1754196200 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: DELETE http://storage-service.dev.svc.cluster.local:8082/evaluations/test-seq-1-1754196200 "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: DELETE http://storage-service.dev.svc.cluster.local:8082/evaluations/test-seq-2-1754196201 "HTTP/1.1 200 OK"
tests/integration/test_celery_tasks.py::TestCeleryTasks::test_multiple_tasks_sequential PASSED
INFO:httpx:HTTP Request: POST http://storage-service.dev.svc.cluster.local:8082/evaluations "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: DELETE http://storage-service.dev.svc.cluster.local:8082/evaluations/test-state-1754196203 "HTTP/1.1 200 OK"
tests/integration/test_celery_tasks.py::TestCeleryTasks::test_task_state_tracking PASSED
INFO:integration.conftest:API health check passed
tests/integration/test_docker_event_diagnostics.py::test_diagnose_container_lifecycle_timing
=== Container Lifecycle Timing Results ===

Test: instant_error
  Submission time: 0.221s
  Total time: 7.460s
  Execution time: 7.239s
  Status: failed
  Has logs: True (length: 110)

Test: print_then_error
  Submission time: 0.248s
  Total time: 8.133s
  Execution time: 7.885s
  Status: failed
  Has logs: True (length: 130)

Test: sleep_then_error
  Submission time: 0.168s
  Total time: 6.120s
  Execution time: 5.952s
  Status: failed
  Has logs: True (length: 122)

Test: normal_completion
  Submission time: 0.285s
  Total time: 6.001s
  Execution time: 5.717s
  Status: completed
  Has logs: True (length: 8)
PASSED
INFO:integration.conftest:API health check passed
tests/integration/test_docker_event_diagnostics.py::test_container_removal_timing
=== Container Lifecycle Progression ===
  0.443s: status=running, output=False, error=False, runtime=Nonems
  0.607s: status=provisioning, output=False, error=False, runtime=Nonems
  0.784s: status=provisioning, output=False, error=False, runtime=Nonems
  1.025s: status=provisioning, output=False, error=False, runtime=Nonems
  1.303s: status=provisioning, output=False, error=False, runtime=Nonems
  1.784s: status=provisioning, output=False, error=False, runtime=Nonems
  2.416s: status=provisioning, output=False, error=False, runtime=Nonems
  3.111s: status=provisioning, output=False, error=False, runtime=Nonems
  4.177s: status=provisioning, output=False, error=False, runtime=Nonems
  5.581s: status=provisioning, output=False, error=False, runtime=Nonems
  7.590s: status=provisioning, output=False, error=False, runtime=Nonems
  9.795s: status=failed, output=False, error=True, runtime=7972ms
PASSED
INFO:integration.conftest:API health check passed
tests/integration/test_evaluation_job_imports.py::TestEvaluationJobImports::test_standard_library_imports PASSED
INFO:integration.conftest:API health check passed
tests/integration/test_evaluation_job_imports.py::TestEvaluationJobImports::test_import_error_captured PASSED
INFO:integration.conftest:API health check passed
tests/integration/test_evaluation_job_imports.py::TestEvaluationJobImports::test_ml_libraries_available PASSED
INFO:integration.conftest:API health check passed
tests/integration/test_evaluation_job_imports.py::TestEvaluationJobImports::test_sys_path_and_modules PASSED
INFO:integration.conftest:API health check passed
tests/integration/test_evaluation_job_imports.py::TestEvaluationJobImports::test_import_with_syntax_error PASSED
INFO:integration.conftest:API health check passed
tests/integration/test_evaluation_job_imports.py::TestEvaluationJobImports::test_relative_imports PASSED
INFO:integration.conftest:API health check passed
tests/integration/test_evaluation_job_imports.py::TestEvaluationJobImports::test_multiline_imports PASSED
INFO:integration.conftest:API health check passed

🧹 Cleaning up test jobs...
   (Preserving all test jobs for debugging)
   To clean up manually:
   kubectl delete jobs -n dev -l test-run=20250802-214153

📦 Collecting test results...

🧹 Cleaning up coordinator job...
   ⚠️  Tests failed - preserving coordinator job for debugging
   To view logs: kubectl logs job/test-coordinator-20250802-214153 -n dev
   To delete: kubectl delete job test-coordinator-20250802-214153 -n dev
   To see failed test jobs: kubectl get jobs -n dev -l test-run=20250802-214153